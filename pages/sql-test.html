<!DOCTYPE html>
<html>
<head>
    <title>Joes World</title>
    <link rel="icon" href="media/ico/favicon.ico" type="image/x-icon" />
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Add any necessary stylesheets or scripts here -->
    <link rel="stylesheet" href=".././style.css">
    <script src="../scripts/seppe.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.7.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.7.0/firebase-firestore.js"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <style>
    </style>

</head>
<body>

    <center>
        <div class="container">

            <div class="header">
                <iframe src="header-content.html" frameborder="0" scrolling="no" class="header-content-iframe"></iframe>
            </div>



            <div class="content-large-fill">
                <center>
                    <canvas id="canvas" width="800" height="800"></canvas>
                    <script>

                        // Initialize Firebase
                                var firebaseConfig = {
                                          apiKey: "AIzaSyCqgWyZOOfVZddqVjV-ZsDpMo6b0F1UJxs",
                                          authDomain: "joesworldonline-967be.firebaseapp.com",
                                          databaseURL: "https://joesworldonline-967be-default-rtdb.firebaseio.com",
                                          projectId: "joesworldonline-967be",
                                          storageBucket: "joesworldonline-967be.appspot.com",
                                          messagingSenderId: "817241549916",
                                          appId: "1:817241549916:web:787af20d01f9172efaca99"
                                        };
                                firebase.initializeApp(firebaseConfig);

                                // Retrieve options from Firestore database
                                var options = [];
                                var db = firebase.firestore();
                                db.collection("options").get().then((querySnapshot) => {
                                    querySnapshot.forEach((doc) => {
                                        options.push(doc.data().name);
                                    });
                                });

                                // Create spinning wheel using Winwheel.js
                                var wheel = new Winwheel({
                                    'numSegments': options.length,
                                    'segments': options
                                });

                                // Set up event listener for spin button
                                document.getElementById("spin-button").addEventListener("click", function() {
                                    // Generate random number to determine which option the wheel will land on
                                    var randomIndex = Math.floor(Math.random() * options.length);
                                    var chosenOption = options[randomIndex];
    
                                    // Remove chosen option from array and update Firestore database
                                    options.splice(randomIndex, 1);
                                    db.collection("options").where("name", "==", chosenOption).get().then((querySnapshot) => {
                                        querySnapshot.forEach((doc) => {
                                            db.collection("options").doc(doc.id).delete();
                                        });
                                    });
    
                                    // Spin the wheel to the chosen option
                                    wheel.animation.stopAngle = wheel.getRandomForSegment(randomIndex);
                                    wheel.startAnimation();
                                });


                    </script>
                </center>
                <p>To Submit action, please enter login and click <span class="word-red">Submit</span> </p>
                <center>
                    <div style="background-color: lightsteelblue; background: snow; font-size: 20px; padding: 10px; border: 3px solid lightsteelblue; margin: 10px; ">
                        <form>

                            <label for="username">Username:</label>
                            <input type="text" id="username" name="username">

                            <label for="password">Password:</label>
                            <input type="password" id="password" name="password">

                            <input type="submit" value="Submit" value="Submit" style="background-color: #CD5C5C; color: #ffffff; padding: 10px 20px; font-size: 16px;">
                        </form>
                    </div>
                </center>

            </div>



            <div class="footer">
                <iframe src="footer.html" frameborder="0" width="100%" class="footer-iframe">
                </iframe>

                <script type="text/javascript" language="javascript">
                    $('.myIframe').css('height', $(window).height() + 'px');
                </script>

            </div>



        </div>
    </center>
</body>
</html>
