<!DOCTYPE html>
<html>
<head>

    <title>Background Photo Swapping</title>
    <style>
        body {
            display: flex;
            justify-content: center;
            align-items: center;
            background-image: url("../media/png/bf-bg01.png");
            background-size: cover; /* Change background-size to "cover" */
            background-repeat: no-repeat;
            background-position: center;
            height: 100vh;
            margin: 0;
            padding: 0;
        }

        #container {
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
            height: 100%; /* Set container height to 100% */
        }

        #beeg_fish {

        }


        #counter {
            height: 50px;
            position: relative;
            left: -45vw;
        }

        button {
            height: 50px;
            
            position: relative;
            left: -45vw;
        }
    </style>
</head>
<body>
    <div id="container">
        <img id="beeg_fish" src="../media/png/spinner1.png" alt="Beeg Fish Not Found">
        <button onclick="spinbeeg_fish()">Spin</button>
        <div id="counter">Speed: 0</div>
        <audio id="spinSound" src="../media/mp3/spin.mp3"></audio>
    </div>

    <script>
        var beeg_fish = document.getElementById('beeg_fish');
        var valueA = 0;
        var prevAngle = 0;
        var spinSound = document.getElementById('spinSound');
        var lastSoundTime = 0;
        var maxSoundInterval = 50; // Maximum interval between sound plays (in milliseconds)
        var interval;

        var backgroundPhotos = [
            "../media/png/bf-bg01.png",
            "../media/png/bf-bg02.png",
            "../media/png/bf-bg03.png",
            "../media/png/bf-bg04.png",
            "../media/png/bf-bg05.png",
            "../media/png/bf-bg06.png"
        ];
        var currentBackgroundIndex = 0;

        function spinbeeg_fish() {
            if (interval) {
                clearInterval(interval);
            }
            var speed = Math.floor(Math.random() * (50 - 25 + 1) + 25);
            spin(speed);
        }

        function spin(speed) {
            interval = setInterval(frame, 10);

            function frame() {
                valueA = (valueA + speed) % 360; // Calculate new angle

                beeg_fish.style.transform = 'rotate(' + valueA + 'deg)'; // Apply rotation

                speed *= 0.98; // Reduce speed

                document.getElementById('counter').textContent = 'Speed: ' + speed.toFixed(2);

                if (speed < 0.01) {
                    clearInterval(interval);
                    interval = null;
                }

                if (Math.abs(valueA - prevAngle) >= 10 && (Date.now() - lastSoundTime) >= maxSoundInterval) {
                    playSpinSound();
                    prevAngle = valueA;
                    lastSoundTime = Date.now();
                }
            }
        }



        function playSpinSound() {
            var newSpinSound = new Audio('../media/mp3/spin.mp3');
            newSpinSound.play();
        }

        function swapBackgroundPhoto() {
            currentBackgroundIndex = (currentBackgroundIndex + 1) % backgroundPhotos.length;
            var newBackgroundPhoto = backgroundPhotos[currentBackgroundIndex];
            document.body.style.backgroundImage = 'url("' + newBackgroundPhoto + '")';
        }
    </script>
</body>
</html>
