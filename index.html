<!DOCTYPE html>
<html>
<head>
    <title>Joes World</title>
    <link rel="icon" href="media/ico/favicon.ico" type="image/x-icon" />
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="stylesheet" href="style.css?v=11?dd=22">
    <style type="text/css">
        table {
            page-break-inside: auto
        }

        div {
            page-break-inside: avoid;
        }
        /* This is the key */
        thead {
            display: table-header-group
        }

        tfoot {
            display: table-footer-group
        }
    </style>


    <!----CODE FOR THE SHUFFLE BOX-->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <!-- Add the Firebase SDK scripts -->
    <script src="https://www.gstatic.com/firebasejs/8.6.2/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.6.2/firebase-storage.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.6.2/firebase-database.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.6.2/firebase-auth.js"></script>
    <script src="scripts/seppe.js?v=3"></script>
    <script src="scripts/shufflebox.js?v=3"></script>
    <script src="scripts/back-map.js?v=3"></script>
    <script src="scripts/firebase-megascript.js"></script>




    <meta http-equiv="cache-control" content="max-age=0" />
    <meta http-equiv="cache-control" content="no-cache" />
    <meta http-equiv="expires" content="0" />
    <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
    <meta http-equiv="pragma" content="no-cache" />

    <style>
        #status {
            font-weight: bold;
        }

            #status::before {
                content: "Status: ";
            }

            #status[data-status="offline"] {
                color: red;
            }

            #status[data-status="online"] {
                color: green;
            }

        .column {
            border-right: none !important;
            border-left: none !important;
            background-color: #ebe4cd !important;
            width: 85%;
            margin-top: 2%;
        }

            .column p {
                font-size: .7rem;
            }

            .column h {
                font-size: .7rem;
            }

        .row-index {
            border-top: none !important;
            border-bottom: none !important;
            background-color: #eee3c1 !important;
        }

        table {
            margin-top: 1rem;
        }

        th {
            border: 3px dotted #92AAFC;
            border-top: none !important;
            border-bottom: none !important;
            background-color: #ebe4cd !important;
            padding: .5rem;
        }

        .button-container {
            display: flex;
            flex-wrap: wrap;
            justify-content: space-around;
            padding: 10px;
            border-top: none !important;
            border-bottom: none !important;
            background-color: #bababa !important;
            margin-top: 1rem;
        }

        .button {
            border: 3px dotted #92AAFC;
            border-top: none !important;
            border-bottom: none !important;
            background-color: #ebe4cd !important;
            padding: .5rem;
            margin: .5rem;
        }

        
        .scoreboard-data table {
            width: 100%;
            border-collapse: collapse;
            text-align: center;
        }

        .scoreboard-data {
            margin-top: 1rem;
        }

            .scoreboard-data th,
            .scoreboard-data td {
                padding: 5px;
                border-bottom: 1px solid #ccc;
                
            }

            .scoreboard-data th {
                background-color: #4CAF50;
                color: #fff;
                font-size: 18px;
                background-color: #bababa !important;
            }

        .scoreboard-data td {
            font-size: 16px;
        }

        .scoreboard-data tr:nth-child(even) {
            background-color: #f2f2f2;
        }

        .scoreboard-data tr:hover {
            background-color: #ddd;
        }

        @media (max-width: 768px) {
            /* Apply smaller text size for screens up to 768px width (typical phones) */
            .scoreboard-data th,
            .scoreboard-data td {
                font-size: 12px;
                padding: 0px;
            }
        }

   
    </style>

</head>
<body>
    <!--Change Display to Enable/Disable Christmas fish killing-->
    <div class="christmas-ending" id="christmas-ending" style="display: none;">
        <style>
                 .christmas-ending { 
            box-shadow: inset 0 0 0 2px grey, inset 0 0 0 4px black;
            background-color: white;
            font-size: 23px;
            width: 20%;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 50%;
            height: 50%;
            text-align: center;
            border-radius: 10px;
        }

        #bird, #birdimg {
        cursor: pointer;
    }

    .disappear {
        animation: disappear 0s linear 3s forwards;
            }

            @keyframes disappear {
                to {opacity:0;}
            }

            .close {
                width:50px;
                height:50px;
            position: absolute;
            background-color: red;
            font-weight: 900;
            font-size: 24px;
            top: 0;
            right: 0;
            }
        </style>
        <center>
            <button class="close" id="closebtn" onclick="close_christmas_window()">X</button>
        <p class="word-seppe">NO MORE CHRISTMAS!!!!<br>CLICK TO <span style="color: red;">MURDER</span> THE CHRISTMAS FEESH</p>
        <img id="bird" src="media/gif/christmas-end.gif" onclick="playGif()" style="display: none; width: 40%;" class="disappear">
        <img id="birdimg" src="media/png/fish-christmas.png" onclick="playGif()" style="width: 50%;">
        </center>
      </div>
      
      <script>

        function close_christmas_window(){
            var christmascontainer = document.getElementById("christmas-ending");
            christmascontainer.style.display = "none";
        }
        function playGif() {
          var bird = document.getElementById("bird");
          var birdimg = document.getElementById("birdimg");
          var christmascontainer = document.getElementById("christmas-ending");
      
          // Set the GIF source to start playing
          bird.src = "media/gif/christmas-end.gif";
          
          // Remove the click event listener to prevent multiple plays
          bird.removeEventListener("click", playGif);
          bird.style.display = "block";
          birdimg.style.display = "none";
        
          // Add a listener for the end of the GIF to remove it from the page
          bird.addEventListener("animationend", function () {
            bird.remove();
            christmascontainer.style.display = "none";

          });
        }


        
      </script>



    <!--Firebase Authenticaion Information-->
    <div class="header-login">
        <div class="account-dropdown">
            <button class="account-btn" id="accountBtn">Login</button>
            <button id="logoutBtn" style="display: none;">Logout</button>
            <div class="dropdown-content" id="dropdownContent">
                <div id="userDisplay" class="user-info" style="display:none;"></div>
            </div>
        </div>
        <div id="loginStatus" style="display: none; align-items: center;">
            <div style="width: 10px; height: 10px; background-color: green; border-radius: 50%; margin-right: 5px;"></div>
            <div id="loginStatusText" style="color: green;">Logged in</div>

        </div>
    </div>
    <div id="loginFormContainer" class="login-form-container draggable">
        <form id="loginForm">
            <h2>Login</h2>
            <input type="email" id="email" placeholder="Email" required>
            <input type="password" id="password" placeholder="Password" required>
            <button type="submit">Login</button>
        </form>
    </div>




    <center>
        <div class="container">


            <div class="header">
                <iframe src="pages/header-content.html?v=4" frameborder="0" scrolling="no" class="header-content-iframe"></iframe>


            </div>



            <div class="content-large">


                <!--If the user is not logged in, offer them to create an account-->
                <div id="notLoggedInMessage" style="display: none; border-top:none;border-right:none;border-left:none;">
                    <!--<p>Only a Loser wouldn't be logged in.</p>-->
                    <p class="word-seppe-christmas" style="font-size: 100%;">Merry Christmas Joe's World!</p>
                    To Create an account, click <a href="pages/account-apply.html">here</a>
                </div>

                <!-- If the USer is logged in, show this Div-->
                <div id="LoggedInMessage" style="display: none; border-top:none;border-right:none;border-left:none;">
                    <p class="word-seppe-christmas" style="font-size: 100%;">Merry Christmas, Joe's World!</p>
                        <p style="font-family: daydream; font-size: 1rem;">This website has been one of the most rewarding projects I have ever worked on and i am so grateful to share it with all of you.</p>
                        <p style="font-family: daydream; font-size: 1rem;">I hope you all have a wonderful and peacefull holiday!</p>
                        <h2 class="word-seppe">-Joe, aka seep, aka seepe, aka guiseppe</h2>
                        <img style="width:15rem;" src="media/jpg/tree_fire.jpeg">
                </div>


                <!-- The Beeg Map-->
                <div class="column">
                    <a href="https://www.beeg.fish/pages/beegfish" class="header-link" style="color: rgb(97, 111, 64); text-shadow: rgb(151, 198, 44) 5px 5px 0px; font-family: daydream;" target="_top">Beeg Fish∝</a>

                    <div class="button-container">
                        <button class="button" onclick="location.href='https://www.beeg.fish/pages/beegfish.html?background=../media/png/bf-bg-coin01.png'">Coin Flip</button>
                        <button class="button" onclick="location.href='https://www.beeg.fish/pages/beegfish.html?dice=4'">D4</button>
                        <button class="button" onclick="location.href='https://www.beeg.fish/pages/beegfish.html?dice=6'">D6</button>
                        <button class="button" onclick="location.href='https://www.beeg.fish/pages/beegfish.html?dice=8'">D8</button>
                        <button class="button" onclick="location.href='https://www.beeg.fish/pages/beegfish.html?dice=10'">D10</button>
                        <button class="button" onclick="location.href='https://www.beeg.fish/pages/beegfish.html?dice=12'">D12</button>
                        <button class="button" onclick="location.href='https://www.beeg.fish/pages/beegfish.html?dice=20'">D20</button>
                    </div>
                </div>

                <div class="column">
                    <a href="pages/seep-coin.html" class="header-link" style="color: rgb(13, 71, 161); text-shadow: rgb(26, 219, 49) 5px 5px 0px; font-family: daydream; target="_top">Seep Coin🪙</a>
                    <!--Start of SeepCoin-->
                   
                    <div class="scoreboard-data">
                        <table>
                            <thead>
                                <tr>
                                    <th>Position</th>
                                    <th>Username</th>
                                    <th>Score</th>
                                </tr>
                            </thead>
                            <tbody id="scoreboard-body">
                                <!-- Data will be loaded here -->
                            </tbody>
                        </table>
                    </div>
                    <script>
                        // Function to update the scoreboard on the page
                        function updateScoreboard(snapshot) {
                            var scoreboardBody = document.getElementById('scoreboard-body');
                            scoreboardBody.innerHTML = '';

                            var scoreboardData = [];

                            snapshot.forEach(function (childSnapshot) {
                                var username = childSnapshot.key; // Get the username from the snapshot key
                                var score = childSnapshot.val();
                                scoreboardData.push({ username: username, score: score.points });
                            });

                            // Sort the scoreboard data in descending order based on scores
                            scoreboardData.sort((a, b) => b.score - a.score);

                            if (scoreboardData.length === 0) {
                                // If there is no data, display a message in the tbody element
                                var emptyRow = document.createElement('tr');
                                var emptyCell = document.createElement('td');
                                emptyCell.setAttribute('colspan', '3');
                                emptyCell.textContent = 'No one has a Seep Coin, will you be the first?';
                                emptyRow.appendChild(emptyCell);
                                scoreboardBody.appendChild(emptyRow);
                            } else {
                                var positions = ["🥇", "🥈", "🥉"];
                                for (var i = 0; i < Math.min(scoreboardData.length, 3); i++) {
                                    var row = document.createElement('tr');

                                    var positionCell = document.createElement('td');
                                    positionCell.style.fontSize = '20px'; // Adjust the font size if needed
                                    positionCell.innerHTML = positions[i];
                                    row.appendChild(positionCell);

                                    var userCell = document.createElement('td');
                                    userCell.textContent = scoreboardData[i].username;
                                    row.appendChild(userCell);

                                    var pointsCell = document.createElement('td');
                                    pointsCell.textContent = scoreboardData[i].score;
                                    row.appendChild(pointsCell);

                                    scoreboardBody.appendChild(row);
                                }
                            }
                        }

                        // Show the loading logo while the data is being loaded

                        // Listen for changes in the 'scores' node and update the scoreboard accordingly
                        database.ref('scores').on('value', function (snapshot) {
                            updateScoreboard(snapshot);
                        });
                    </script>
                    <!--End of SeepCoin-->
                </div>

                <script>

                </script>
                <!-- End of The Beeg Map-->
                
                <!--Gallery Shuffle

                <center>
                    <style>
                        .gallery img {
                            max-width: 200px;
                            max-height: 200px;
                            margin: 10px;
                            display: flex;
                            justify-content: center;
                            align-items: center;
                        }
                    </style>
                    <div class="gallery" style="max-width: 20rem; margin-top: 5rem; border-right: none; border-left:none;border-bottom:none;"></div>
                    <p>Submit your own art on <br /><a href="pages/board.html">The Board</a></p>


                </center>
                    --> <!--By placing the end of the commend here, the gallery shuffle is temporaily dissabled-->
            </div>

            <!--Submissions Box-->
            <div>
                <center>
                    <b>Submission Box</b></br>
                    <i style="font-size:70%;">What Should be added next to Joe's Basement?</i><br />
                    <!-- Textbox and Button -->
                    <input type="text" id="sub-text" style="width: 10vw;">
                    <button onclick="addSubmission()">Add</button>
                    <!--The Refresh button works, but is currently not needed <button onclick="refreshDisplay()">Refresh</button>-->
                    <!-- Display Box -->
                    <div id="displayBox" style="border: none; font-size: .8rem;"></div>
                    <p style="font-size: 40%; margin: 0px;">Total: <span id="counter">0</span></p>
                </center>
            </div>




            <!--HTML Shuffle, it loads a differnet page on every time you load-->



            <div id="htmlshufflebox" style="max-width: 30vw;"></div>




            <div class="footer">
                <iframe src="pages/footer.html" frameborder="0" width="100%" class="footer-iframe">
                </iframe>



            </div>



        </div>
    </center>


</body>
</html>    